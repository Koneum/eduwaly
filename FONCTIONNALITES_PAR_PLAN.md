# üìã FONCTIONNALIT√âS COMPL√àTES PAR PLAN D'ABONNEMENT

> **Version**: 1.0  
> **Derni√®re mise √† jour**: 7 novembre 2025

---

## üí∞ PLANS & TARIFS

| Plan | Prix (FCFA/mois) | Cible |
|------|------------------|-------|
| **STARTER** | 5 000 | Petites √©coles qui d√©butent |
| **PROFESSIONAL** | 12 500 | √âcoles en croissance |
| **BUSINESS** | 25 000 | Grandes institutions |
| **ENTERPRISE** | Sur devis | R√©seaux d'√©tablissements |

---

## üìä LISTE COMPL√àTE DES FONCTIONNALIT√âS

### 1. üë• GESTION DES UTILISATEURS

#### 1.1 √âtudiants
- Cr√©ation de profils √©tudiants
- Import en masse (Excel/CSV)
- G√©n√©ration automatique d'identifiants
- Code d'enr√¥lement pour parents
- Gestion des inscriptions
- Historique acad√©mique
- Affectation aux fili√®res/classes
- Gestion des pr√©sences
- Upload photo de profil

#### 1.2 Enseignants
- Cr√©ation de profils enseignants
- Assignation de mati√®res
- Gestion des qualifications
- Planning personnel
- Historique des cours

#### 1.3 Parents
- Inscription via code d'enr√¥lement
- Acc√®s au suivi de leurs enfants
- R√©ception de notifications
- Consultation des bulletins

#### 1.4 Administrateurs
- Gestion multi-r√¥les
- Permissions granulaires
- Logs d'activit√©
- Gestion de l'√©quipe

---

### 2. üìö GESTION ACAD√âMIQUE

#### 2.1 Structure
- Cr√©ation de fili√®res
- Gestion des niveaux
- Organisation des classes/salles
- Affectation capacit√©s

#### 2.2 Modules/Mati√®res
- Cr√©ation de modules
- Volume horaire
- Affectation aux enseignants
- Pr√©requis

#### 2.3 Emplois du Temps
- Cr√©ation de cours
- Attribution salles/enseignants
- Vue par jour/semaine
- **Filtre par fili√®re** ‚ú®
- D√©tection de conflits
- Export PDF

#### 2.4 Notes & √âvaluations
- Saisie de notes
- Calcul de moyennes
- Gestion des coefficients
- Historique des notes
- Bulletins PDF automatiques

#### 2.5 Pr√©sences
- Enregistrement des pr√©sences
- Gestion des absences
- Justificatifs
- Statistiques de pr√©sence
- Alertes automatiques

---

### 3. üíº GESTION FINANCI√àRE

#### 3.1 Frais de Scolarit√©
- D√©finition des frais
- Frais par niveau/fili√®re
- Frais optionnels
- Paiements en tranches

#### 3.2 Paiements
- Enregistrement des paiements
- Multiple m√©thodes (Cash, Mobile Money, Ch√®que, Virement)
- **Paiement en ligne (Stripe/VitePay)** (BUSINESS+)
- Historique complet
- Re√ßus automatiques

#### 3.3 Bourses
- Gestion des bourses
- Bourses en % ou montant fixe
- Crit√®res d'attribution
- Suivi des b√©n√©ficiaires

#### 3.4 Rappels
- Rappels automatiques de paiement
- Emails/SMS automatiques
- Relances programm√©es

#### 3.5 Reporting Financier
- Tableau de bord financier
- Rapports de revenus
- Statistiques de paiements
- Export Excel/PDF

---

### 4. üì® COMMUNICATION

#### 4.1 Messagerie Interne
- Messages entre utilisateurs
- Groupes de discussion
- Notifications temps r√©el
- Historique des messages

#### 4.2 Notifications Email
- Emails transactionnels
- Templates personnalis√©s
- Limite selon plan
- Statistiques d'envoi

#### 4.3 Notifications SMS
- SMS transactionnels (BUSINESS+)
- Limite mensuelle selon plan
- Confirmation de livraison

#### 4.4 Annonces
- Annonces g√©n√©rales
- Ciblage par r√¥le/fili√®re/niveau
- Publication programm√©e
- Archivage

---

### 5. üìù DEVOIRS & SOUMISSIONS

#### 5.1 Devoirs
- Cr√©ation de devoirs
- Date limite
- Points/Notation
- Fichiers joints

#### 5.2 Soumissions
- Soumission par √©tudiants
- Upload de fichiers
- Historique des soumissions
- Correction en ligne
- Feedback enseignant

---

### 6. üìÑ DOCUMENTS & STOCKAGE

#### 6.1 Documents
- Upload de documents
- Organisation en dossiers
- Partage avec groupes
- Contr√¥le d'acc√®s
- Limite selon plan

#### 6.2 Stockage
- Stockage cloud S3
- Quota selon plan
- Types de fichiers support√©s
- Historique des fichiers

---

### 7. üìä REPORTING & ANALYTICS

#### 7.1 Rapports Basiques
- Bulletins PDF
- Certificats de scolarit√©
- Relev√©s de notes
- Re√ßus de paiement

#### 7.2 Rapports Avanc√©s (PRO+)
- Statistiques acad√©miques
- Analyse des performances
- Taux de r√©ussite
- Comparaisons par fili√®re
- Export personnalis√©s

#### 7.3 Analytics Avanc√©s (BUSINESS+)
- Dashboard analytique
- Graphiques interactifs
- Pr√©dictions IA
- Indicateurs cl√©s (KPI)
- Rapports automatis√©s

---

### 8. üîß FONCTIONNALIT√âS TECHNIQUES

#### 8.1 Multi-Campus (BUSINESS+)
- Gestion de plusieurs campus
- Vue consolid√©e
- Rapports par campus
- Limite: 5 campus max (BUSINESS), illimit√© (ENTERPRISE)

#### 8.2 API & Webhooks (BUSINESS+)
- API REST compl√®te
- Documentation Swagger
- Webhooks personnalis√©s
- Int√©grations tierces

#### 8.3 SSO & 2FA (ENTERPRISE)
- Single Sign-On
- Authentification √† deux facteurs
- SAML/OAuth
- Active Directory

#### 8.4 Infrastructure
- H√©bergement cloud
- Backups automatiques
- Infrastructure d√©di√©e (ENTERPRISE)
- SLA 99.9% (ENTERPRISE)

#### 8.5 Branding (ENTERPRISE)
- Logo personnalis√©
- Couleurs de marque
- Domaine personnalis√©
- Emails de marque

---

### 9. üõ†Ô∏è SUPPORT & SERVICES

#### 9.1 Support
- **STARTER**: Email uniquement
- **PROFESSIONAL**: Email + Chat
- **BUSINESS**: Email + Chat prioritaire
- **ENTERPRISE**: Support 24/7 d√©di√©

#### 9.2 Onboarding
- Formation initiale
- Documentation compl√®te
- Tutoriels vid√©o
- Support technique

---

## üìã MAPPING DES FONCTIONNALIT√âS PAR PLAN

### ‚≠ê STARTER (5 000 FCFA/mois)

**Limites:**
- 100 √©tudiants max
- 10 enseignants max
- 5 GB stockage
- 100 emails/mois

**Fonctionnalit√©s incluses:**
- ‚úÖ Gestion √©tudiants (basique)
- ‚úÖ Gestion enseignants (basique)
- ‚úÖ Gestion parents
- ‚úÖ Fili√®res & niveaux
- ‚úÖ Classes/salles
- ‚úÖ Modules/mati√®res
- ‚úÖ Emplois du temps (avec filtre)
- ‚úÖ Notes individuelles
- ‚úÖ Pr√©sences basiques
- ‚úÖ Frais de scolarit√©
- ‚úÖ Paiements (Cash, Mobile Money, Ch√®que)
- ‚úÖ Bulletins PDF basiques
- ‚úÖ Documents (100 max)
- ‚úÖ Support email

**‚ùå Non inclus:**
- ‚ùå Messagerie interne
- ‚ùå Devoirs & soumissions
- ‚ùå Rapports avanc√©s
- ‚ùå Analytics
- ‚ùå Paiement en ligne
- ‚ùå Notifications SMS
- ‚ùå Multi-campus
- ‚ùå API

---

### üöÄ PROFESSIONAL (12 500 FCFA/mois)

**Limites:**
- 500 √©tudiants max
- 50 enseignants max
- 50 GB stockage
- 500 emails/mois

**Fonctionnalit√©s incluses:**
- ‚úÖ **Toutes les fonctionnalit√©s STARTER**
- ‚úÖ Messagerie interne
- ‚úÖ Devoirs & soumissions
- ‚úÖ Pr√©sences avanc√©es (avec alertes)
- ‚úÖ Bourses avanc√©es
- ‚úÖ Rappels automatiques paiement
- ‚úÖ Rapports avanc√©s
- ‚úÖ Export Excel/PDF
- ‚úÖ Annonces cibl√©es
- ‚úÖ Groupes de discussion
- ‚úÖ Templates emails personnalis√©s
- ‚úÖ Support email + chat

**‚ùå Non inclus:**
- ‚ùå Paiement en ligne
- ‚ùå Notifications SMS
- ‚ùå Multi-campus
- ‚ùå API & webhooks
- ‚ùå Analytics avanc√©s
- ‚ùå Infrastructure d√©di√©e

---

### üíº BUSINESS (25 000 FCFA/mois) - **RECOMMAND√â**

**Limites:**
- 2000 √©tudiants max
- 200 enseignants max
- 200 GB stockage
- 1000 emails/mois
- 1000 SMS/mois
- 5 campus max

**Fonctionnalit√©s incluses:**
- ‚úÖ **Toutes les fonctionnalit√©s PROFESSIONAL**
- ‚úÖ Paiement en ligne (Stripe/VitePay)
- ‚úÖ Notifications SMS (1000/mois)
- ‚úÖ Multi-campus (5 max)
- ‚úÖ API REST compl√®te
- ‚úÖ Webhooks personnalis√©s
- ‚úÖ Analytics avanc√©s
- ‚úÖ Dashboard BI
- ‚úÖ Pr√©dictions IA
- ‚úÖ Rapports automatis√©s
- ‚úÖ Int√©grations tierces
- ‚úÖ Backup quotidien
- ‚úÖ Support prioritaire

**‚ùå Non inclus:**
- ‚ùå Campus illimit√©s
- ‚ùå Infrastructure d√©di√©e
- ‚ùå SSO & 2FA
- ‚ùå Branding personnalis√©
- ‚ùå SLA 99.9%
- ‚ùå Support 24/7

---

### üè¢ ENTERPRISE (Sur devis)

**Limites:**
- ‚úÖ **TOUT ILLIMIT√â**

**Fonctionnalit√©s incluses:**
- ‚úÖ **Toutes les fonctionnalit√©s BUSINESS**
- ‚úÖ √âtudiants illimit√©s
- ‚úÖ Enseignants illimit√©s
- ‚úÖ Stockage illimit√©
- ‚úÖ Campus illimit√©s
- ‚úÖ Emails/SMS illimit√©s
- ‚úÖ Infrastructure d√©di√©e
- ‚úÖ Branding personnalis√©
- ‚úÖ Domaine personnalis√©
- ‚úÖ SSO (Single Sign-On)
- ‚úÖ 2FA (Two-Factor Auth)
- ‚úÖ SAML/OAuth
- ‚úÖ Active Directory
- ‚úÖ SLA 99.9%
- ‚úÖ Support 24/7 d√©di√©
- ‚úÖ Account Manager d√©di√©
- ‚úÖ Formation sur site
- ‚úÖ D√©veloppements sur mesure

---

## üìä TABLEAU COMPARATIF D√âTAILL√â

| Fonctionnalit√© | STARTER | PROFESSIONAL | BUSINESS | ENTERPRISE |
|----------------|---------|--------------|----------|------------|
| **Prix (FCFA/mois)** | 5 000 | 12 500 | 25 000 | Sur devis |
| **√âtudiants max** | 100 | 500 | 2000 | ‚àû |
| **Enseignants max** | 10 | 50 | 200 | ‚àû |
| **Stockage** | 5 GB | 50 GB | 200 GB | ‚àû |
| **Documents** | 100 | 500 | 2000 | ‚àû |
| **Emails/mois** | 100 | 500 | 1000 | ‚àû |
| **SMS/mois** | ‚ùå | ‚ùå | 1000 | ‚àû |
| **Campus** | 1 | 1 | 5 | ‚àû |
| | | | | |
| **Gestion de base** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| √âtudiants | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Enseignants | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Parents | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Fili√®res/Niveaux | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Classes/Salles | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| | | | | |
| **Acad√©mique** | | | | |
| Emplois du temps | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Filtre par fili√®re | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Notes & moyennes | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Pr√©sences basiques | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Pr√©sences avanc√©es | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| Bulletins PDF | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| | | | | |
| **Finance** | | | | |
| Frais de scolarit√© | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Paiements manuels | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Paiement en ligne | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| Bourses | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Rappels auto | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| Rapports financiers | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| | | | | |
| **Communication** | | | | |
| Messagerie interne | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| Notifications email | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Notifications SMS | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| Annonces | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| | | | | |
| **Devoirs** | | | | |
| Cr√©ation devoirs | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| Soumissions | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| Correction en ligne | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| | | | | |
| **Documents** | | | | |
| Upload documents | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Partage | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Stockage cloud | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| | | | | |
| **Reporting** | | | | |
| Rapports basiques | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Rapports avanc√©s | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| Analytics | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| Dashboard BI | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| | | | | |
| **Technique** | | | | |
| Multi-campus | ‚ùå | ‚ùå | ‚úÖ (5 max) | ‚úÖ (‚àû) |
| API REST | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| Webhooks | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| SSO & 2FA | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| Branding | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| Infrastructure d√©di√©e | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| SLA 99.9% | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| | | | | |
| **Support** | | | | |
| Email | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Chat | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| Prioritaire | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| 24/7 | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| Account Manager | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |

---

## üéÅ SUPER ADMIN - GESTION DES R√âDUCTIONS & ACC√àS SP√âCIAUX

### Fonctionnalit√©s Super Admin

Le Super Admin peut attribuer des **acc√®s sp√©ciaux** ou **r√©ductions** √† un ou plusieurs √©tablissements.

#### 1. Types d'Acc√®s Sp√©ciaux

**A. Plan Gratuit avec Dur√©e Limit√©e**
- Plan PROFESSIONAL gratuit pendant X mois
- Plan BUSINESS gratuit pendant X mois
- Auto-retour au plan FREE √† expiration

**B. R√©duction sur Abonnement**
- R√©duction en % (ex: -30%)
- R√©duction en montant fixe (ex: -5000 FCFA)
- Dur√©e d√©finie ou ind√©termin√©e

**C. Fonctionnalit√©s √† la Carte**
- D√©bloquer une fonctionnalit√© sp√©cifique
- Ex: Messagerie sur STARTER
- Ex: API sur PROFESSIONAL
- Dur√©e d√©finie ou ind√©termin√©e

**D. Augmentation des Limites**
- Plus d'√©tudiants (ex: 200 au lieu de 100)
- Plus d'enseignants
- Plus de stockage
- Dur√©e d√©finie ou ind√©termin√©e

#### 2. Gestion des Offres

**Interface Super Admin:**
- Vue liste de tous les √©tablissements
- Bouton "G√©rer acc√®s sp√©cial" par √©cole
- Formulaire de cr√©ation d'offre:
  - Type d'offre (gratuit, r√©duction, fonctionnalit√©, limite)
  - Valeur (% ou montant)
  - Date de d√©but
  - Dur√©e (jours) ou "Ind√©termin√©e"
  - Raison/Notes
- Historique des offres appliqu√©es
- Notifications automatiques avant expiration

#### 3. Informations Visibles par Super Admin

**D√©tails √âtablissement:**
- Nom de l'√©cole
- Email administrateur
- Plan actuel
- Date d'inscription
- Statut abonnement (Actif/Inactif/Expir√©)
- Date d'expiration
- Montant mensuel actuel
- Historique de paiements
- Statistiques d'utilisation:
  - Nombre d'√©tudiants
  - Nombre d'enseignants
  - Stockage utilis√©
  - Emails envoy√©s ce mois
  - SMS envoy√©s ce mois
- Offres actives
- Notes Super Admin

---

## üíæ IMPL√âMENTATION TECHNIQUE

### Sch√©ma Base de Donn√©es

```prisma
model SpecialOffer {
  id            String   @id @default(cuid())
  schoolId      String
  school        School   @relation(fields: [schoolId], references: [id])
  
  type          OfferType // FREE_PLAN, DISCOUNT, FEATURE, LIMIT
  
  // Pour FREE_PLAN
  freePlanName  String?  // PROFESSIONAL, BUSINESS
  
  // Pour DISCOUNT
  discountType  DiscountType? // PERCENTAGE, FIXED
  discountValue Float?
  
  // Pour FEATURE
  featureKey    String?  // messaging, api, analytics, etc.
  
  // Pour LIMIT
  limitType     String?  // students, teachers, storage
  limitValue    Int?
  
  // Dur√©e
  startDate     DateTime @default(now())
  endDate       DateTime?
  duration      Int?     // en jours, null = ind√©termin√©
  isIndefinite  Boolean  @default(false)
  
  // Meta
  reason        String?
  notes         String?
  createdById   String
  createdBy     User     @relation(fields: [createdById], references: [id])
  createdAt     DateTime @default(now())
  isActive      Boolean  @default(true)
  
  @@index([schoolId])
  @@index([isActive])
}

enum OfferType {
  FREE_PLAN
  DISCOUNT
  FEATURE
  LIMIT
}

enum DiscountType {
  PERCENTAGE
  FIXED
}
```

### Fonctions Helper

```typescript
// lib/special-offers.ts

export async function getActiveOffers(schoolId: string) {
  const now = new Date()
  
  return await prisma.specialOffer.findMany({
    where: {
      schoolId,
      isActive: true,
      startDate: { lte: now },
      OR: [
        { isIndefinite: true },
        { endDate: { gte: now } }
      ]
    }
  })
}

export function calculateEffectivePrice(
  basePlanPrice: number,
  offers: SpecialOffer[]
): number {
  let price = basePlanPrice
  
  offers.forEach(offer => {
    if (offer.type === 'FREE_PLAN') {
      return 0
    }
    
    if (offer.type === 'DISCOUNT') {
      if (offer.discountType === 'PERCENTAGE') {
        price = price * (1 - offer.discountValue / 100)
      } else if (offer.discountType === 'FIXED') {
        price = Math.max(0, price - offer.discountValue)
      }
    }
  })
  
  return price
}

export function hasFeatureAccess(
  schoolPlan: string,
  featureKey: string,
  offers: SpecialOffer[]
): boolean {
  // V√©rifier acc√®s de base selon plan
  const baseAccess = checkBaseFeatureAccess(schoolPlan, featureKey)
  if (baseAccess) return true
  
  // V√©rifier offres sp√©ciales
  return offers.some(offer => 
    offer.type === 'FEATURE' && 
    offer.featureKey === featureKey
  )
}

export function getEffectiveLimit(
  schoolPlan: string,
  limitType: string,
  offers: SpecialOffer[]
): number {
  let limit = getBaseLimitForPlan(schoolPlan, limitType)
  
  offers.forEach(offer => {
    if (offer.type === 'LIMIT' && offer.limitType === limitType) {
      limit = Math.max(limit, offer.limitValue)
    }
  })
  
  return limit
}
```

---

## üìù NOTES D'IMPL√âMENTATION

### Priorit√©s

1. **Phase 1** (Imm√©diate):
   - Corriger mapping actuel des quotas
   - Mettre √† jour PricingSection avec nouveaux plans
   - Mettre √† jour PlanSelector

2. **Phase 2** (Cette semaine):
   - Cr√©er interface Super Admin pour offres sp√©ciales
   - Impl√©menter syst√®me de r√©ductions
   - Notifications avant expiration

3. **Phase 3** (Prochaine semaine):
   - Tests complets de tous les plans
   - Documentation utilisateur
   - Formation Super Admin

---

**Date de cr√©ation**: 7 novembre 2025  
**Version**: 1.0  
**Auteur**: Syst√®me Schooly
